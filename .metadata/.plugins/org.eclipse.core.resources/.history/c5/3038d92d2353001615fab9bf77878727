import java.sql.ResultSet;
import java.sql.SQLException;

import org.openqa.selenium.By;

import com.mysql.jdbc.jdbc2.optional.MysqlDataSource;


public class ACProvisioning extends CRMClosure{

	public static void main (String args[])
	{
		CRMClosure c = new CRMClosure();
		try {
			c.Closure();
			c.driver.findElement(By.xpath(".//*[@id='side-menu']/li[19]/a")).click();
			MysqlDataSource dataSource = new MysqlDataSource();
		    dataSource.setDatabaseName("amp_dev_v2");
		    dataSource.setUser("amp_admin_new");
		    dataSource.setPassword("maLu2Ec8");
		    dataSource.setServerName("192.168.101.38");
		    java.sql.Connection conn = dataSource.getConnection();
		    java.sql.Statement stmt = conn.createStatement();
		    ResultSet rs = stmt.executeQuery("SELECT company_name FROM am_crm WHERE COMMENT='The Account Manager has been selected' ORDER BY created_date DESC LIMIT 1;");
		    while (rs.next()) {
		    String x = rs.getString("company_name");
		   
		    System.out.println(x);
		    }
		   
		    c.driver.findElement(By.xpath("//input[@value='Company']")).sendKeys(rs.getString("company_name"));
			c.driver.findElement(By.linkText("Add to Provision")).click();
			
			
		} catch (SQLException e) {
			
			System.out.println(e);
		}
		
		
	}
	
}
